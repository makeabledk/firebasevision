<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="ChatHistoryState">
    <option name="serializedSessions">
      <map>
        <entry key="fef35949-7864-49fe-b269-f23155677f7b" value="{&quot;id&quot;:&quot;fef35949-7864-49fe-b269-f23155677f7b&quot;,&quot;name&quot;:&quot;Replace TedPermission with native Android permission handling&quot;,&quot;timestamp&quot;:1755087799887,&quot;messages&quot;:[{&quot;role&quot;:&quot;user&quot;,&quot;content&quot;:[{&quot;type&quot;:&quot;text&quot;,&quot;text&quot;:&quot;\n\u003cadditional_data\u003e\nBelow are some potentially helpful/relevant pieces of information for figuring out to respond\n\u003ccurrent_file\u003e\n```kotlin:firebasevisionlib/src/main/java/dk/makeable/firebasevisionlib/FirebaseVisionSetup.kt, lines\u003dALL(1-115)\npackage dk.makeable.firebasevisionlib\n\nimport android.Manifest\nimport android.app.Activity\nimport android.content.Context\nimport android.hardware.Camera\nimport android.util.Log\nimport androidx.fragment.app.Fragment\nimport androidx.lifecycle.Lifecycle\nimport androidx.lifecycle.LifecycleObserver\nimport androidx.lifecycle.LifecycleOwner\nimport androidx.lifecycle.OnLifecycleEvent\n\n/**\n * This class uses a reference to an context, and a reference to a CameraSourcePreview/GraphicOverlay to control and release the camera when needed based on the activities lifecycle.\n */\nclass FirebaseVisionSetup\u003cT\u003e (\n    private val owner: T,\n    private val context: Context,\n    private val graphicOverlay: GraphicOverlay,\n    private val cameraSourcePreview: CameraSourcePreview,\n    private val recognitionProcessor: RecognitionProcessor,\n    private val rationaleString: String,\n    private val deniedString: String\n): LifecycleObserver where T: LifecycleOwner {\n\n    private val cameraSource: CameraSource \u003d CameraSource(context, graphicOverlay)\n\n    private var started: Boolean \u003d false\n    private var isStarting: Boolean \u003d false\n\n    init {\n        cameraSource.setMachineLearningFrameProcessor(recognitionProcessor)\n\n        // Register this object to the context lifecycle\n        owner.lifecycle.addObserver(this)\n\n        // Register this object with the VisionSetupManager\n        VisionSetupManager.instance.registerVisionSetup(this)\n\n        start() // Start if not already.\n    }\n\n    @OnLifecycleEvent(Lifecycle.Event.ON_RESUME)\n    private fun start() {\n        if (owner.lifecycle.currentState.isAtLeast(Lifecycle.State.CREATED) \u0026\u0026 !started \u0026\u0026 !isStarting) {\n            isStarting \u003d true\n            secureCameraPermission {\n                started \u003d true\n                Log.d(\&quot;FIREBASEVISION\&quot;, \&quot;Starting cameraSource with preview width: ${cameraSourcePreview.width}, height: ${cameraSourcePreview.height}\&quot;)\n                cameraSource.setRequestedCameraPreviewSize(cameraSourcePreview.width, cameraSourcePreview.height)\n                cameraSourcePreview.start(cameraSource, graphicOverlay)\n                isStarting \u003d false\n            }\n        }\n    }\n\n    @OnLifecycleEvent(Lifecycle.Event.ON_PAUSE)\n    private fun stop() {\n        if (started) {\n            started \u003d false\n            cameraSourcePreview.stop()\n        }\n    }\n\n    @OnLifecycleEvent(Lifecycle.Event.ON_DESTROY)\n    private fun release() {\n        cameraSource.release()\n\n        // Unregister the setup\n        VisionSetupManager.instance.unregisterVisionSetup(this)\n    }\n\n    private fun secureCameraPermission(onPermissionGranted: () -\u003e Unit) {\n        // Ask the user for permission to use the camera\n        TedPermission.with(context)\n            .setPermissionListener(object : PermissionListener {\n                override fun onPermissionGranted() {\n                    onPermissionGranted()\n                }\n\n                override fun onPermissionDenied(deniedPermissions: MutableList\u003cString\u003e?) {\n                    (owner as? Activity)?.finish()\n                    (owner as? Fragment)?.fragmentManager?.popBackStack()\n//                    owner.finish() // Finish the visionActivity\n                }\n            })\n            .setRationaleMessage(rationaleString)\n            .setDeniedMessage(deniedString)\n            .setPermissions(Manifest.permission.CAMERA)\n            .check()\n    }\n\n    /**\n     * Will reload the camera with the given recognition processor, now recognizing the things for that processor.\n     */\n    public fun setRecognitionProcessor(processor: RecognitionProcessor) {\n        cameraSource.setMachineLearningFrameProcessor(processor)\n    }\n\n    /**\n     * Toggles the flashlight if available\n     */\n    public fun toggleFlashlight(enabled: Boolean) {\n        cameraSource.toggleFlashlight(enabled)\n    }\n\n    /**\n     * Sets the focusMode on the Camera, IF AND ONLY IF it is supported by the camera.\n     */\n    public fun setFocusMode(focusMode: String) {\n        cameraSource.setFocusMode(Camera.Parameters.FOCUS_MODE_MACRO)\n    }\n\n}\n```\n\u003c/current_file\u003e\n\n\n\u003clinter_errors\u003e\n## Linter Errors\n\nPath: firebasevisionlib/src/main/java/dk/makeable/firebasevisionlib/FirebaseVisionSetup.kt\nErrors:\n\nLine 76: Unresolved reference \u0027TedPermission\u0027.\nLine 77: Unresolved reference \u0027PermissionListener\u0027.\nLine 78: \u0027onPermissionGranted\u0027 overrides nothing.\nLine 82: \u0027onPermissionDenied\u0027 overrides nothing.\n\u003c/linter_errors\u003e\n\u003c/additional_data\u003e\n\u003cuser_query\u003e\nThe secureCameraPermission, please ask for the Camera permission the native way\n\u003c/user_query\u003e&quot;}]},{&quot;role&quot;:&quot;assistant&quot;,&quot;content&quot;:[{&quot;type&quot;:&quot;thinking&quot;,&quot;thinking&quot;:&quot;gAAAAABonINLyc_fLzPkShhY-ZYWA3SFcet0_0Zqma0HoYfLjXYRWU_-NzWKEDBHYpjDSSc380T3WtjsIDmSWn9NePlFTo7U5RIjSmakEUEvnMfxWVLz1D_ov-Nc2ESQ2_qXhvFb-G_fbnok_-vVDOSGptB77FLEgKPrax2KYq1YdFlznwCll7fLr86q822pApPCCHPZLU2nhe2dNf7JAOowdxnITNNvbHzcLOLgHY5Q4H1yJgfXWvBK_dnQoleYNaclJNPSn1Y-5oYpymIsuOb5ET2aOBGqKI7HmxyUfey-IVRmv_RpQGqaGQA00SNtMunr5G65tLdnL-pyVQunlOz-TWxuekWDYZnerXyb0NTIkafptAjqsPPy0mrC5XX_9cEfuhP09v3TIdST4YCg2logXu3T1G7qGxjwyjCJFB07j3uCPKtbFe6Y9IQdMmb_LO8EHqF9DQYi3mA0_0RUWwm0fUnYYC-vj_g4xU_XEA_2ne04kNuj_TGJWpXfiPUAsIOEAt8tCUwk15l5uY-1_gzu9yP9RWXPwRslZ4Re6-onQ_7xJHMeyTcPyX6TnrRTmY5_cOSIBCOeB4XgIKff4nXZQKVfj5pbVt-JvQ6X0Yk6VNB7xV9SU-bzC9TsbMmKrkfSCpokwel4rIynZ04AJHdwp21TmgLKU-uAb9hl3yPsgS_fN7rXYdBdDjbCeXMk3S236zKoXWVUh026ehu-Vrt_hs6dithIz5INUWFQ5Kjo7-wN3lxZ57tTpxqjSkM0TCSn99fhkiHr4XUnDgYF2X9jGW8qSFPTFlM0Lx2zwyblgXun7V46H6uR3O31DprHAblbFOAOw3HD53gP0mPRJQN66OCj0j1bkdRV6ho_EVAz_aiZq_FdMzNmmmCY5FbPAhsb2TQkdWiVkadwecZDlYXlBOn_WW8345m9yIviJpS1mZeG0cI_EsRIP7Bsb2uhWopnmR3eu1sPTQP6juv7OtBUAWhksdw2nwYS-rtHFX7lrhMyQ0voUGOom7ahlDPFRl70tjNWQD3DBBEtCiDPiX9-O6ISuZBRXN0o9lO6KhJ5Xmrit_su7Oq32kaHToM1VUHQoW0yxMuNN-F0ajPn0dMEfqT5OP9OncLFa-6_IPCKsdgXRl4_Yb5StykJXK1kQNyfEF-_SAgwHYryvswHBbE_3fJNQfzsZP2AMOCGuoWZ-mUoR5mwmax6M0SvUYwP4_0yJrWlfW_1-5aTKUhF0hmUUDKg83eimQac55_X75emcb-ya5himNalqp2-ecvTYB5GOH9Eilh2xsIhx-4kgR9pVzLJL4c1bLGQHi2vgzzP67hRyHFddwnqmOnPKJvG6WSfgnUDXNeADk2XQ7cmvFgWUTs2QiYzf4tMCDaXnMw1W9gxGShZxbdZsaRx1I5HQh1hW_ltS9nHY5PVBTEYLqs4N2KKjKOUXZJVWHEjjnA1X4zPHONW_ukF0m0oKAbizT4ImWxJeOvfo0YejeTq5EImZ2qdpp5H7d76WCWl7_2h1LWaE_LcTQYTPpYSKVQayGcrL7ipjPrsjlYfzBYt-RIBxFtINJko2F-1vtCdlyFUwQkmFupXjax6m0SP_2u-IdIWAJEvjtwaqaAtaGEgmdh6dBINOjqriZ5m_ZPf6GFPZn7-PZD7-Yg-aE5PMQ_wclOXGTljAv7CZ40C_1iNXd4xg-GivScWXYu0f45LW7ymk9z68iClK8PFE79219TG7a68vU-khojfbbszKBqXigHmNh7lN5rsdZLyUYTSFze7zarrq4kfoOvlXSVpjoDdZUJ9p5YiUJeskJYIW7LLxaRrXJHoKqW5HaVJO3cAwVcc264pdb7RJ46Le_K-nahLISWRtnrxu3Adi8w1ep5pvGtHDO3bwSI6Q5QD3oQ91ygRpdZYZSlKVHJ6gxNRETa7lNjg88itTz611XetSZI1LlXMltG9kmEKn_xTgW57fqo_3BvigRhQuWdnXj5UQfQQv-SYtlWEpeyJ5sISHUZOaeixskCMnsLO293roMP9dw1EZJgiLVDVHcdjg7tJTvNU0G8x0cIbmdNejr2aPDpuDg1lH1N9IZ9rVoHHW5yPQFtaQ9593JmbX6KwBxxqpxrLGwpQmhjV-zgBGu7aKD9yYdVKaXI7JVlBULm5vshKPZ70gq8roxHgWhY9hbkfOxsJ7v7mRfwazMOKGbz3a1OOqsBx_FZDFao3e1HFO7XXEnu9I3U3G1acwmBR9RbtfrEqKNJvkRX28TMJTsQR_nvl2DF2xKjBCqtrnv031pYVdm7HXzXP_KO3xnIcygO4oHj4T_xSRphQ4JEuaa5IntmONNa8K1EnJi2mH5NFX3j9juOlpGuS7ebr8CmWOO4j_8X86bAAIdOgKpps4AnDE2pmLPN4hqKb8lnmqWNcW0oSdEgwj-enoVLQ55KJjm1Yb2DJZHY9X5-_cNg4cwaliTVn7Vy7a3NHoWmJAByXTXOa6puaZLWGHlUcmmDgYpgT5aZRXodsqq5Q32nDMqEqaCqubgEmeAHdXHCh-BaO_xIa60ivCxZ5y22_CgyOLagW0ROs5mX-opIB5lD7B2Fps8vgPnBUqPKWMwoYo1o3YmQG9J77rnckNxAWNiy1mWegHnnjdYhUuBhASxJe2r6BPW6rAcajRzmNzvFvVrJFXoe7A4G1iJraN-8NCzuU1jm-8RdrF2U8IQEZthAZz8mSYMcrgAHVf-_iZiLomjabiICcR0kGCx3Rwb6Qrc_WT9RQSn_mqECo2HA71TMNs94adwY0iwTMHr80zjHzsf0f8EvY8Z5ld-TRmajAiAw3cvOfa3k7ybe7p3dP0s7l7e_yOmRffp4dmhfrRdKoaoKKCrEf481uVlMF4i7dyh_zIJcSlEj46IVSyxbU2P3JREcfIOFdS5VwrHa8LiDYZMM6LDrhbtAodf4PSskyXvS1zGcBc-TgY8mYkJIKG1bb-EWqm1uCxzntWFT8J2O4OX811p--_oCUMzV5BFsWSGltmbIlCcPkHIJDlaeiRMBxRrNyZAmPnsnsDBRoEzhnu0S0L_LCad78uSHmNzHsqQ1UKDlfR_LBI-XkKqn3iV--_IGUuXyT2bIRyk8vyUM8evDDShPn8pJcqbphHZI7XNJNzDGPb2U7J2tL3WZ2B_OHWpDWQ5a7Wxtt_gmx_S9F1XppRUvptm9wOCY3hKE5lqMVjSqZs0d6bv7lbjly1dct9j7lf6AWAIZlOJYfq5dLTwGrGkVKho-rgnoTlCi2GP5B1w73XEJvNZQCDT7o94544zyOjfhVMYls8ZdkxnwUCgKZyNRApyTWqZCBmcZ7lbVijAMekwFbEdvUCilDbDnizb8ZS11x7xq2Z_mqhyzDB37WZ20UafUP-7AqYdTExBxViVzmhork2G653S1eEwRV0dQjpeuOf_vXAxtrwur3LqoHgyLpJe5GpTOvzRw26n5-bsomqhP6RyZ3MmEnE-Zss_vEtXyZzdAeUt2SgCB962Ns8EuKae8CY1Y8U4I-Oi7ijQZfb0b1OgsPwmt4DOlnOwy4e0YHJAEPGhj3BYxodaU3MOjlyKSQYOZaj4wszpo22_8JD0VTqY2_1g1r8-21e1L3ErqxlB97gwIkUFBVct3QQTwgYvXtvRB92tAEMImP-zEYjDnwnUpu6dM31IoLl2Mq0JANkG3hUgxWimqIJUxwPX40CHDV5jzGYG6vm9XQ2QL3Xyy678KdsrEUFVVDFtxRj2zA5UtcB_3XQHvZcRuf_iqHTnADlTMtO6cseU235kAGmEf5CbgXfBTQCcp17YaivLk-xWwNAgtJWoKDkTInA8fBYpF5Z6ZnNc2OX-bmU9ArQBIc9M882gYCWQJa_UDYdp2CNvipCKNQHY17IYdS1yHfF9O0NMIvs4fycCCgc197UZP2aLvx4ptvlzrdhpwml59znm2_cKcKYogmPdYF1dKjmWg8zCf7ihtYqhGh2miNstldfSyU1h16PA6TFw1ZceKJUVUhhUtdmpi7n8sLFflvAENi1yVE4mqEXwp7D2FcRSPlimvumy1TsCu0fvGHPziWkVeYFKWDT5Y_XPs1gXHa6NVHbOaOPVndsqYIlBwTDvspekIF2SRPcuaveO6_Ehqr9126R8gifQa-1E_DhpbmmbCPQICavNtTOrwTdBvI3EGL_ByNmnNOyHBGkvnek-u3c004Twg-F_ReD0ZJxQOyCIg3ZxVlMKs95mauE07Yw-8CU9967DUpkzGYgss5QKrCwjXD8dBEDpe_tPmPSJwYvl-gLitItmviun6HWookZUlo1i7RsPejZhXHtXZ3xLozEAGMx3kPgcWIiqnFXL9NlEThGtBod9hV525azlj4scGPynUO-K380aM0zqYo8pidyAfYh5SYT_tCA5XMiFJk0kYuS1PUgGiZDt-wz-7uHwZYbOf7Kwlwn-o_DsXuCWelyFtGuL0ohCLVh-Ez0JmpOH01HObGyPeOP6k39zyXNnegp7L1XN99dlLcI8LYgvo09VmuvsSM0APRBYV7-hiWCrXANw3vk7okuy-pBLV5gIVX8RjFfPtcLgHWJACnofGYb9lkZW3z1jWfjjthEEbXr3_PQM6XEiwbJw1kbO6-I29hHzA4NxWpEy8v7KB6R5aegOVpjVPUjpL16USkeCkVvkviJjgs8VPy0HKxCmgI0MHY-9pAglagArZnLHk_TcqG-pAQnkNl9AUG_SHOIRn6K4Jubw_oqpnRjMUG5-14U3yAHYT8LGhGPxbHaNV2jPzxsNpZZdDNUDIWpSteUY0MVcPVq2d3_TkVDdjBrgNRsovPadnMfF8mcBr2T0VHDVKAfNfICMAtsIzQ1PSep6yUrQYTVMwtKRruDLY2wqaLrZRbxkpWOylmqSIpjJ7D-9R50eNN7-ArlH_AUj8LJHogOIs74u5amEWAJOV8QHtoMMufyZlxAxU7N98p26ypQXI9jTO6HpOHhWt8iv90XYzjcJbCy0lQC8TNIHHMcteu5XBn40srlKhM3DISU8AkzEeciU-bTPeQ17a3tdv79BANvW_lkOl6G7bd0nN_XPAEXN_xObUfozjUhjkLDEr3ziFrknWHX_wZzIeI9mEDFl180dNHm9iiPBtcoAWNyCdcokZxlbs_u1YOXLid6PKEwMcciacaC_yae4Kinz5lIAH8UFk7vFdswtvd_ZZ7bPUgHtRL2FltofgRKl0i70VlVos8I6RDo9JNv0yOD3_jx_-ZHFHZjV8MuwVLV-gL2n-dI2KVjCjZJJEm4I1e6FLUs2XXhpJzJOVnpkSARU8DdJJYZUAfh-yzpVc9b2ph7sRXDSgwRWe-Mado20MexfzRjKx1EswHqLbIwzeoKN5Gt8oRA2Aoc3qVuFIcy1nDxp2npKsOM8p1Afz4ocO1BWYIY5Q4NzQnweVfgpwLxlgb37Vzkd2bqxeefHRSe9ygeaw-nfR7lCrCFH8meJOPycVnzG3D8UpW79-QWZT8Hcc4MD09qNp8b9CYRFYYBE6WYBqHfWpHgAu7u-mYLpYP1ojEmpjgNx5cpuC1bI4Tw5kOoduXlBhB-8tex19aSbDpQ8rNYqzXe9TBBqeSbD9VRlkpkz5UN5LVpXkm1YMK67pHT2Mlyqt51FTUDfcEHL95HFw7HQHULtbLvXakyAy0hboj1q0N8sIDloYFgD_czro8leR5awIzp6cwIt5q6kES6osIY4ZBabKsnprkJAz5z4r4Ddfg2anwGUqMq3DLatzs6jwjvyjf0Y6Ot4ByZxj8X6p_r68zbcegrQx24mGhGdzpvinHtE4SXdG04tgXixCDDZSIH0kOqZuQsH2BxjBEk7V1XWFhoH4mNYeheAYkb84RBUGdfKYD1IqgiT-igN_iry3C5alliVtN2wzdxRAuYwH2feNWrVs7iRZ6jt15ydeJVMg9E237PYKWEcshBIMNzHcgIw5uobIqVMtav74UyLtCsRJQ30aB1CmJUDHMpmxhZhC90exy3prggyuWbROV7PyR8RTZCRlK_mo1GaJwhxmnpy6bv22Ax9uIbIoxHe_fAVVrGtrHW1bivtaT0jQnkrXYqGSr4SHIqTbgvKW-T63mQKuXuFUNpPg9IVRCTufD9INdGRg3gsH2h3rbshUdzRi3xAcMbmp7fCBTUbm6b9mAVEB6yQ1mlOiimF_HRuPumKuCm3wIGlw1mNwXz02c4zhPbv1Q-pUhKMHNkoabIFRtiz7B5sBRwPmsRPA51VkSq4QP2EpvXjHQrIfz1B-iRTiKyCIaBSyt_DvszSWzwDlEY4-aeyMInxpC73QVLDuehEumsv5gXN5I4odiVELfYGX1tfogTyLzu4eaAoUkS-R0ipHcdv1-p7aESNowZWq_7D-Q3UD1O8nMLLYH8YAAA9eP7sVe4xjm0iO4U8phNg2rvf7IGAumEofYYICC5OI3AD-Pbiy8vxVoRbeLc7NoeK80fEyZvjV9nvBAJOAup_Mp27GvZVcOqeoJmhi1vRkL8M6bdWlYHETrraha0TZkNMy-kZ1q892ljWsHFG9cC7B1F95RtDdWwCafoWRPei5nW773hkXweBgq_AY7Zbz1NZTXsdvvc0nzPnzHMEUjWQBfmS46YyN6wRUihPhuNIPSOrfsDXfvXfR8XlTa4GimKDv8BCpIYbFF8PyJzpOFt-VNW-MMuaalQTirfg8yJyhey7t8LiVx0Vnq7cMJlRr8ZvYRkObkHYgPz0ZHCv9Ppuva5vt2Zc5xDusPD8sMTF8QCx2NXSnrdIU0L44zXIhtbPNMSeuK8QR0829W5csQhbDWQFVg7KCwW6n8NTLo0GdojDcEqiHJVPZhzIMYhabE2M8v7rT88vNt9DJcPJYzDX90aTiEvAWAbEifwtTYEGfXA33CZ2MkrYyDOFJ5xbCJxjICeo8U0lLpxrqVxZESpGICrNNArDZOBMeeSO0Js-lZhtigU4EudW0sK06MweHjnwjv4hbKYYtBM8ZkEBSjzh6BVY0z7X4znCrMYnubJVUPdMCTZ552Nx0bxSZyRSQojmajofU_l408z_6LNJtBjr3gDFWcmo9eldAOvM3MrL4CAKwS67bmzCOY73e1Z76gP4QLdRkqBHoC6g5MdI015JwYzGNqJrcnVgZyiM1BTYFgPlBTJnd5EqBdw5maIzdXEXsgSq0-JM3EU1h5q9PE3jjYjVV-wXws3N4X-TgkHfFr9AxKDXzpjszW3Wf8Q_8i6TtK5fiizEzvEcNC3zYzh5wl32tnZcKJH8d0Er6JwsTatHEzZBMX7ClV4NKCtY8wK188vYZBS99sFw1dNj1Soyg7c2NQgA0HPJO6RCpyrlLDzswkS276FeUjdFe-N721R8uulyB0bNrSSubB2j_gTxgRsxFY6gDz8xRh7sGTE_mow4XihWpKoOQ1qzjkleSUNimNvzLKSL0j2wCB4fvenRWg_W8Cplu3s1CetP1CBPFWp_yynEV1OGiczg1ovH2qztOxzhqjYVJ1LE6y6KrinnRmjjTx-PbVVZk5vF0MNaRj6jW_w72nrkN1fTp4GtALsnCR7qd4bxBzIdiRs33iYyi4dstIG9AeCt_AYYIsgR5kcqSttwAQwEdQfdq96sLKcoC9U0tUmr3rKndOOHS-Box5g-pbmiBis6aLfQILRLS8CShr_FRj7ah0n3NuqiDYVz99I0dt2Vf0pP8teKypEAclw4GCx1FDlKgc-W7VFh0gex1wtENVi6baMfpjg6BQQwEnbQRVJtJAnQJvorUuQvfoKrsj3lxQF80iQHJFweNMcz_WXB80hcZpL3pgTobTlduCZyq0n-N6kb8nl1Jz2MmBb922WW6poiEQ9gCo8gK3CUhrTK6wPewwXU47MPVe1Aez3is0hD95Rtz90zSPv3SMPMtvhsmiAveZJBcCNbkxeixk-2pF5VyeP-nEGRq25154GeMyWth4MYucn9oO8e_9U8fUXU4mr2Ohtp0ii1SrqNmZdthVjsmArED4IsSG0oKKIH65wskUzNnuWY3QKT_ZZLiiC6C-x78pbhbUsGX1tsUxaEV_6iY3bpaAGS6Hs97BpAL1Tfd-Gh2pZHcyi0ZYOmvinpak-l1xY9sjqsHHx3wlENTI3hGEwgpOcKWg09sEdzSPmDYvHoSPa4GGSPio6E9hoFs3GWzhzl-z7wAieoKC6f67L8-P-dYpktLeu8svWMExAUchTocmQm8Uip_-I9yOGjsOQq86mW36MHiXvpUwdQZ5RzUnZeMjQ-ZPVjXd9ixGjAWZ3djXOef79hJ1zQV4BRGyWA5I-vHf0twf_MwGgfJAwvvlxigpyLL3rYb8Ctw8A4Cla2D7s06UaFyZb_AxnwIZZVC6ek0-_nbJf6-AvpJYKHj0nzZ43cCqOdPMc8NzvTufxF6HLvWozKfJqeOvPrAED8skpV_R0G9mPXirMIbxGKShEBw-QbF7f-QDm397bIodvVBJLUR7OsxkBkQQi6Bu0FoDUFv8W3vSRmCbGLrTU3joiCoe1X6EoIuSJgCaVILU3jYLHdX_V--48uRFkWOzwKL1h9qQg4ap8p5Shd46IEJ0wJeI3W7s1mZH27dM5jhzQ7bf4WVlY1Y-3UXkW-rbChLgewQ8kgQhRxO9ZO7uxVC8dPNQJcV3ZN4bwaEl5Ct7ZBpf7W18tDjUOKmbmRqkXNnzQDZvRa5Gj9VbPKex5C9pMe_C9U1CW1G9ck9oaDJVej6H0Bt6cdKKazVe-pw8L9p1t0CaJ_GI3TxKD_r5L0JV-02jEpTrg4taBfophDksvI9hC3CGV8-xjnNOPvjzYS-H_HeA_AsuxmyrXPzYOyHrqmX5dfxZhVdb2qArN0y3h7m6ksMVAj44YIq_-vD59FVSyESV8rQ-_X0BwwqCqqgjVAhszyaoGM0vT7e0F7jTGWpDuYr3fVPL144vnqS91CkBQzxUb_0uxjwqNmp_lL2l8Oq-DW7UOAuT2U5-PmkqzJZnd_1tmstgze6QlTNlPBIpDNkVo71DbfuqIqVizjt3Y99rJ2OWa6B6IcleMAV58POb7emykatQI6LuXLmUznimbBMEbeuuiM7RkgkThFkqmLvGiiiNJtjZnWiaqm9eDdyDYfh5WJ6ky18zmnzG3HT9N2p3Mnv7lgtCYjZAaGjOE75O43X7Gva_53_iEAWf_m-PAkn0x8gFV1n5WZ6O-LeDf1BXtjPR5MG_i_WAdcGmHZ6MOxBcMrBIZ15oXuSXnt2BXDh4i_iWuZV7GLUEI3WrkmDBaHQjea1XjgGz74mpoeLEMLSlhyQEVRgti5BKCL4zKfL4ZO7b0DGNJqFGFlBNo7n82s_q6X3v4PStKTG1pdXFK-NOE8QFX0tblIJpJrbfvYL9SeJTM7uCi_yUj8ZMhxrhF3T2iG2PCuLwYB4buKDYL_uDhjGvW-QznwIW_jAq48HlK27VuNRUeEXFZjkzTVx-cmtyrq8b_hQSsUFy5x_OymIDcDluWQancHw-ZoFDsK_JbpFtPSKsB-dz-dw5zFQ8e6tXEhdS9eVRMy4QSpw4DeZiW9BO2SU5cGtV2vlO6KZZkT5UEZ7dv9pYObjrxlZj1Z7hIJWYf6k8Ds1RtP_1xIIF2BvnpDmwra7xp9yRxKLXtO55m_yJbqJClcufSgRj2pDbJjQPCR8_cuV6fvBVaCT9V8y_iyiQE1z9QcOfdzq_VurI4ro4ml32WtR5V3HYfHFJ-75av1VOl3KMQ97Xp2RagT9h-noCwpSP3wDxbgFy_HDsvuqjs0SKhjscCpCv9wRK0MgzTi8vy8sN1y4Y4kPXWsdHf9qmle022XMUC698Ipx4AhXSRv3frx-fsKtU358T6su0bTO5bQqtqK_SyztlwXlTcMKOvkS5UbZdPRKCyAFlxBzd-4UA-WKdKvHAigOFXXLMxPd6CYvn13lIBvYBTjK37LCPnho2MzTUMfhHmxCu_BfZgV6HKYxfWI95tMhMjtDEUpnZuybg7h7Nrza2fg3HVZzyL8O0D7LnYoaIylqT6dNAPXQkzuG5cLMpmXEgLMmuaYNs1arl46VB0Arwdd6Et-lgglprICHkV16QdthC7pc3vQ0wVDqi6z6RDfZA5_8yEdrBewqmX14A1iyngh4O3H9WM2nLD-4_mFmm3lUZA-p4HnyiMRrSJsxhi2fRNge8SdmzYIa_MTsZEv-ov-33cYVE6CeSSGMa_LZIdjX17xWwoWFpQoCJJD-sYJJfoxR9-DdT5Zdn8pqfCWbgxzaarOjVDbF0hUaj53uG_BsKhaigphnpBM07WpRPKt_rVIfqDhUaqIFcoZQLMDqItBz95bCA41BjmQx1ne-Hl_z-4DKjbABagNHbF42AS0vryKY6mtfVtBVUudZixgroczXJionY1MNK8cX6GAvwHlfVye1cU_UMi4S7cuwZk8U4D0LGmlUCeQM0SNV7c26PsxiGP_VrrodvA8QxHUHKJ5gAaUeHyzyOmt3nFZB80EW5sFvTM_Npd50akuzs6GLbZyHXpYf-r9MjSpYJaNNFWcydnHEcZIG4zMc85IpB23f4djTyLdshWmXQYRbnj2-rRIP_YL3-HzREWxoS2MAPFdPoBYUq2vyAbkss_FqcJlHZfK0xNAhVcxelFaDpN0xLnkXbYr7uAgJTPchYOsEj2m1w7zZ3evLhTaniTdW4s36CqlvYHILoVlpt5W5JfY6xBWHZeVa5Ryo8vYXHEXyrSSQp0f3RxV3cPRz_vdlQYRY-SGpS5y0ltYoeUopJJLbejxupB8xsFkN_yCeRWnyxIjfwy-l6YhWMedtWsTpi1vM_kko9STEMThJra6ccTBSlD7CUxc88MWP-KuqX4dJbv-YSdzCgHbI2MHEKzm3ADYz7QDejmoA36Q6gLGqEkgyjOjDR8ry3P7R60oODpYcuTAv2sflKst3pg-OwVKNACdpIfWN38h6p1_giDlQpsj4yb_3JQnQb0C6go36CuJ-HigmwDe3S1mWuOGh6HfEP-QjHnSWz3-eyJ_qoI0cicyfGq9ePbzBovbbHE6j_rhveq2Y-oFEMwc_bKgUeSSDL6z49qDSueXRBrqU5FsdZRJxHNGbX0l7EIdUiCwaY6KFHL7hSKbbE_pbNECafys68Ubvsnol9PsoTgHW3qhtACsqh9ngpK6iwt7BckiP3D3_QwzubaDp9S4qyt2xd2TaPUnfKrhrzx9wWTFyvOxG31jf1ZJ3MdzyIHQN29l_EyZy7j07b8Gf2KtCf0-GvfXfvkCdBzMHpcLZPDrntXx_Ix5dKauTXkY-dx5BPVcfp3Dxzp_8T4iaqn0F7KzzkxKmMWC7-ly9YG2tLCvrdMI6WnZxfL-wtLWPACsv6oJ3Ha9wv4rfoPtK-tc4-epQMHDuB6cMjPTRgMyWq7CuAIVLuTB32xHJ3LaBSUtsC3faOyR-MxzaDhrm0vNUaBE-pAo2eLqPouQ7W7aknVdKCmm4NgJmhKNJ828lew3hnx7CswrrAeVUmup0MxFOLICSTEC0oatA0EYtljL-px5N0eA1Sd9V_tOqNu-SehTkMhXfunvB2eMSfgig4zYth_uLznyn0qmy9X_9igooaTgAHtEf0muNWXdp92bghFzXHNYREKyzHalUsYJEUeBeDJXJmPvFPVcMA2uVJp8KhKNji5GR9pZnjYU2sZ9q5cqQCEPcNkX4wYYrlML7uESbunUq_ISp6YL4tVow5nvW-xx2fHMIANsswLKIIiUo5DD0HfBTlR4PbDM_zMQwKTyU-TfvufjI5u0LEISD2BO0cqQhm2l_EgugPptjYyYKDWlxg48ZRqjA8RsXAh85qQu4tt2G7Zk_zAGuN5AFq9OTN2uqyNdvqvKG6-4W9mF7xVwKtxJELOfC5lobGdHQvwJNAI15qX0fynk5BxwPTO9LXDAhRDBbf-yjwqpAtegJBNXQo9fQqTOgOHMFkuilDnT9uqeliu0kgStI-5egyWUzWSx-myQik2DEBTDXcr5QO3I1TZva6vbYE9tqqunPJzY3i-bRu3dUBuuLlXjc8zwbyhPwBtgEOu_pDyrD_PvfikLLUL4WAXnTk0tQxzuWpsi6JaRR8G2Ag-4gq5vaPlTxh7QbZYSruOZbfrbx2fEmaCqWh6PiAh3cQc_EgLG22KMi0ljqzSYUTTacsKLsVZ7f-Wn6Sg6_zs5swtrop-MZTNxvA_UAVbXV4hpeGKncwHsTr1YqOjb7Gx16oCsU0UdUEpfI87iJZ71J9GbH_v9qYfkIiYfFoqGj1bwc0V_nXIFG6g3A3VS84VxLZ0r-Wclg7jgzQs-1Waz90nP7_hVRan4ilLpI8WqQeg3HC4RsVidgIP610imbc8kiGbAHysliwatqpGGeXQxYRvbZuUGBw0BqC2QJfg6foV94VmKp-zGez3XIfEOwMRl5SIsR-kZXeyA0AyB6omUUVWEAGEnkuWr451R_bP4DgA1h_0KrKra8eojctpMx834HiJbkGbVtTZUwQQEKWqyyKVPHt5KlDnIxelbvEMyh7JN9nmZSTlWcTEXBMzuNY7CbbbNQyDHEOiqW3ow1wuK6Ds8NN5XJZDlno1P-jNrmFfWZjSKcON8MMSPmdkMOvBJuKZ8U8OHG1uh-WfTTAGqymVNyV6DS24EHiFARqXRjSx1pVlAvw4APyLtC9SPd8E9UszKxFiKlgX6mTymb3Dy1Y6jzwIGiYirSYd96MOgik_oCDhp-Vw4OSmfd72rKN1AfMjPnMZJsjkG_JrrI81eAMSsfcQdXYRCWa_HA2rY6JnbVrfGP7YMRg1OSvWoq8wB5uRThjnArP56PEuXUSyK2HR6qhX-OhlNLDuPV9EH619iYroDDhKMHDIy275Xi7ydrOxz9hf-pmv0gnwY_x2q71Y6NHLchScDfALfP1zM6qTp-xeYBtzwqEa08rCc0SMKskBCbfnef6SNVJTKj9IHW_IS2a2hOI1TYHLYO0uLbTzjz9nDInU0BZZvzQP7rmFu4NeeERTkacQOcCftITs4GYdO3dmua8QaOFQInfu8kRWp33SfXR0FllC7rCONi42o7z_GiwFGoqDNo5xykPl9k0e9TjwW5JFghfK1GxDOuaAfUggmjL2zv0rXsDXoHmaK8zfi-j6iuG8dMLl1DaBr4D_2M9GVwtL00ZRRfpZkyXXngqY3kyeTIxYuD-P9i9IpMH7O3RaGUb52lcnil-ivk6zHS1x3tUKO1ddW-NBqFRRcgx61bUhPltvBxWfnT1ridZxMBmG3r04yKsUqFnjmmNj1QnHoXJLxPrhbvvEqY-dJ34R5kTlq_ESSlYytuoBj4xnLg5THhFcWG9tkuBzPNrzDOxBa58Cs9WkrrXMrpKLGxX38l2rZ3UHcYParOmxjwscuyS8N2qpqsysPBQyHXNX48YZeNRlumM3MwHSNagxvv-ZzuyAIiknA67cDFCy_jHkFCByBZU5jeT4aXiDHVB4KH_eOgYNs2eSYhKQRKflCMMp4_zW2WOVaWzFHEJnwygtUKUAQoEophtpNktyLXmkCiQ-mFFSu0f4PMvn4RzKUv-kWH7ryAQO6572D-0tg8mayH6uHtT2rBF6yN5hny2qFSdPJ03LZcIvsP8tQQXKjaezaaTGDiGQTkUljogebhPjAk9tQzqTvzF3MRkOUmhEk5u2vZ-fZ0Q8091E4kbTSNwMGEq1KnCgMY6qZDKQfVpcuEsEtqK8k7rrT2gavRDiK7cv6zvIoRlPflWyMjfnfe6jFjfE189hVd2XrWVyBs0rLa90m8yRyCmqft7UVM-zygBEypDGXVLlUP8f1JyamoVlynoP_EnpoV4y1zKS4ykW5oKMmw0Ug-UcGlZZh0_7mlPf1H8tVuap8uKjNcJrHOyXRhVXOzPuJtw11eqm2YIkaLKWK_wCtHog1zX1w1nzZX9iLwKC9sMdOuBC-HJFXESxB-M3RHoViTDfU_rf16Nm3l7WvEA8h-IycUpne90MhjR5t5uAIgdgPTU8V2jxkjTm2BVoX0KkjQOjPvA4m5HcUSQXQvwmM9Bo1hu5sVRRiBnPn7_i7b7NuzWF1HaY0J25I3FFousXWXtHxgRmvPPsrpP1MWZ7EQg_B769NOt_2tzmwqRKfj62FU9J5jl0D12fYD4IddtbY9niRFIfW8CI3ZsFAln6AoJf-Xq_Q\u003d\u003d&quot;,&quot;signature&quot;:&quot;rs_689c83272f5c819cac3bc60a06be4ae907c92f9cac383ee0&quot;},{&quot;type&quot;:&quot;text&quot;,&quot;text&quot;:&quot;I\u0027ll replace the third-party permission handling with native Android permission requests using the Activity Result API, ensuring the camera permission is requested and handled via the owning `Activity` or `Fragment`. I\u0027ll add the required imports, an `ActivityResultLauncher`, and handle grant/deny callbacks to continue starting the camera or exit appropriately.&quot;}],&quot;tool_calls&quot;:[{&quot;id&quot;:&quot;call_8Q6VY2UG4iB0wd9OUeEmUMpo&quot;,&quot;type&quot;:&quot;function&quot;,&quot;function&quot;:{&quot;name&quot;:&quot;edit_file&quot;,&quot;arguments&quot;:&quot;{\&quot;target_file\&quot;:\&quot;firebasevisionlib/src/main/java/dk/makeable/firebasevisionlib/FirebaseVisionSetup.kt\&quot;,\&quot;instructions\&quot;:\&quot;I will replace TedPermission with native permission handling using Activity Result API, add necessary imports and fields, and update secureCameraPermission accordingly.\&quot;,\&quot;code_edit\&quot;:\&quot;*** Begin Patch\\n*** Update File: firebasevisionlib/src/main/java/dk/makeable/firebasevisionlib/FirebaseVisionSetup.kt\\n package dk.makeable.firebasevisionlib\\n \\n import android.Manifest\\n import android.app.Activity\\n import android.content.Context\\n+import android.content.pm.PackageManager\\n import android.hardware.Camera\\n import android.util.Log\\n+import androidx.activity.ComponentActivity\\n+import androidx.activity.result.ActivityResultLauncher\\n+import androidx.activity.result.contract.ActivityResultContracts\\n+import androidx.core.content.ContextCompat\\n import androidx.fragment.app.Fragment\\n import androidx.lifecycle.Lifecycle\\n import androidx.lifecycle.LifecycleObserver\\n import androidx.lifecycle.LifecycleOwner\\n import androidx.lifecycle.OnLifecycleEvent\\n@@\\n ): LifecycleObserver where T: LifecycleOwner {\\n \\n     private val cameraSource: CameraSource \u003d CameraSource(context, graphicOverlay)\\n \\n     private var started: Boolean \u003d false\\n     private var isStarting: Boolean \u003d false\\n+\\n+    private var pendingOnPermissionGranted: (() -\u003e Unit)? \u003d null\\n+\\n+    private val permissionLauncher: ActivityResultLauncher\u003cString\u003e? \u003d when (owner) {\\n+        is Fragment -\u003e owner.registerForActivityResult(\\n+            ActivityResultContracts.RequestPermission()\\n+        ) { granted -\u003e\\n+            if (granted) {\\n+                pendingOnPermissionGranted?.invoke()\\n+            } else {\\n+                handlePermissionDenied()\\n+            }\\n+            pendingOnPermissionGranted \u003d null\\n+        }\\n+        is ComponentActivity -\u003e owner.registerForActivityResult(\\n+            ActivityResultContracts.RequestPermission()\\n+        ) { granted -\u003e\\n+            if (granted) {\\n+                pendingOnPermissionGranted?.invoke()\\n+            } else {\\n+                handlePermissionDenied()\\n+            }\\n+            pendingOnPermissionGranted \u003d null\\n+        }\\n+        else -\u003e null\\n+    }\\n \\n     init {\\n         cameraSource.setMachineLearningFrameProcessor(recognitionProcessor)\\n \\n         // Register this object to the context lifecycle\\n         owner.lifecycle.addObserver(this)\\n@@\\n         VisionSetupManager.instance.unregisterVisionSetup(this)\\n     }\\n \\n     private fun secureCameraPermission(onPermissionGranted: () -\u003e Unit) {\\n-        // Ask the user for permission to use the camera\\n-        TedPermission.with(context)\\n-            .setPermissionListener(object : PermissionListener {\\n-                override fun onPermissionGranted() {\\n-                    onPermissionGranted()\\n-                }\\n-\\n-                override fun onPermissionDenied(deniedPermissions: MutableList\u003cString\u003e?) {\\n-                    (owner as? Activity)?.finish()\\n-                    (owner as? Fragment)?.fragmentManager?.popBackStack()\\n-//                    owner.finish() // Finish the visionActivity\\n-                }\\n-            })\\n-            .setRationaleMessage(rationaleString)\\n-            .setDeniedMessage(deniedString)\\n-            .setPermissions(Manifest.permission.CAMERA)\\n-            .check()\\n+        val permissionGranted \u003d ContextCompat.checkSelfPermission(\\n+            context,\\n+            Manifest.permission.CAMERA\\n+        ) \u003d\u003d PackageManager.PERMISSION_GRANTED\\n+\\n+        if (permissionGranted) {\\n+            onPermissionGranted()\\n+            return\\n+        }\\n+\\n+        // Request permission using Activity Result API when possible\\n+        pendingOnPermissionGranted \u003d onPermissionGranted\\n+        if (permissionLauncher !\u003d null) {\\n+            permissionLauncher.launch(Manifest.permission.CAMERA)\\n+        } else {\\n+            // Cannot request permission without a Fragment or ComponentActivity owner\\n+            Log.w(\\\&quot;FIREBASEVISION\\\&quot;, \\\&quot;Unable to request CAMERA permission: owner is not Fragment or ComponentActivity\\\&quot;)\\n+            handlePermissionDenied()\\n+        }\\n     }\\n+\\n+    private fun handlePermissionDenied() {\\n+        (owner as? Activity)?.finish()\\n+        (owner as? Fragment)?.fragmentManager?.popBackStack()\\n+    }\\n \\n     /**\\n      * Will reload the camera with the given recognition processor, now recognizing the things for that processor.\\n      */\\n     public fun setRecognitionProcessor(processor: RecognitionProcessor) {\\n*** End Patch\&quot;}&quot;}}]},{&quot;role&quot;:&quot;tool&quot;,&quot;name&quot;:&quot;edit_file&quot;,&quot;tool_call_id&quot;:&quot;call_8Q6VY2UG4iB0wd9OUeEmUMpo&quot;,&quot;content&quot;:&quot;The apply model made the following changes to the file:\n\n```\n@@ -4,6 +4,11 @@\n import android.app.Activity\n import android.content.Context\n+import android.content.pm.PackageManager\n import android.hardware.Camera\n import android.util.Log\n+import androidx.activity.ComponentActivity\n+import androidx.activity.result.ActivityResultLauncher\n+import androidx.activity.result.contract.ActivityResultContracts\n+import androidx.core.content.ContextCompat\n import androidx.fragment.app.Fragment\n import androidx.lifecycle.Lifecycle\n@@ -30,4 +35,32 @@\n     private var isStarting: Boolean \u003d false\n \n+    private var pendingOnPermissionGranted: (() -\u003e Unit)? \u003d null\n+\n+    private val permissionLauncher: ActivityResultLauncher\u003cString\u003e? \u003d when (owner) {\n+        is Fragment -\u003e owner.registerForActivityResult(\n+            ActivityResultContracts.RequestPermission()\n+        ) { granted -\u003e\n+            if (granted) {\n+                pendingOnPermissionGranted?.invoke()\n+            } else {\n+                handlePermissionDenied()\n+            }\n+            pendingOnPermissionGranted \u003d null\n+        }\n+\n+        is ComponentActivity -\u003e owner.registerForActivityResult(\n+            ActivityResultContracts.RequestPermission()\n+        ) { granted -\u003e\n+            if (granted) {\n+                pendingOnPermissionGranted?.invoke()\n+            } else {\n+                handlePermissionDenied()\n+            }\n+            pendingOnPermissionGranted \u003d null\n+        }\n+\n+        else -\u003e null\n+    }\n+\n     init {\n         cameraSource.setMachineLearningFrameProcessor(recognitionProcessor)\n@@ -73,23 +106,33 @@\n \n     private fun secureCameraPermission(onPermissionGranted: () -\u003e Unit) {\n-        // Ask the user for permission to use the camera\n-        TedPermission.with(context)\n-            .setPermissionListener(object : PermissionListener {\n-                override fun onPermissionGranted() {\n-                    onPermissionGranted()\n-                }\n+        val permissionGranted \u003d ContextCompat.checkSelfPermission(\n+            context,\n+            Manifest.permission.CAMERA\n+        ) \u003d\u003d PackageManager.PERMISSION_GRANTED\n \n-                override fun onPermissionDenied(deniedPermissions: MutableList\u003cString\u003e?) {\n-                    (owner as? Activity)?.finish()\n-                    (owner as? Fragment)?.fragmentManager?.popBackStack()\n-//                    owner.finish() // Finish the visionActivity\n-                }\n-            })\n-            .setRationaleMessage(rationaleString)\n-            .setDeniedMessage(deniedString)\n-            .setPermissions(Manifest.permission.CAMERA)\n-            .check()\n+        if (permissionGranted) {\n+            onPermissionGranted()\n+            return\n+        }\n+\n+        // Request permission using Activity Result API when possible\n+        pendingOnPermissionGranted \u003d onPermissionGranted\n+        if (permissionLauncher !\u003d null) {\n+            permissionLauncher.launch(Manifest.permission.CAMERA)\n+        } else {\n+            // Cannot request permission without a Fragment or ComponentActivity owner\n+            Log.w(\n+                \&quot;FIREBASEVISION\&quot;,\n+                \&quot;Unable to request CAMERA permission: owner is not Fragment or ComponentActivity\&quot;\n+            )\n+            handlePermissionDenied()\n+        }\n     }\n \n+    private fun handlePermissionDenied() {\n+        (owner as? Activity)?.finish()\n+        (owner as? Fragment)?.fragmentManager?.popBackStack()\n+    }\n+\n     /**\n      * Will reload the camera with the given recognition processor, now recognizing the things for that processor.\n```\n\nThe edit was successful with no linter errors.&quot;},{&quot;role&quot;:&quot;assistant&quot;,&quot;content&quot;:[{&quot;type&quot;:&quot;thinking&quot;,&quot;thinking&quot;:&quot;gAAAAABonIOiWSQ90zTWIsza-y6vGNeChPrZ56FzoZDDYYycL27uW-BjYcb9EfUo6MXpXt5vxF66N4W5xb6ADR8Ld9CrvhF6hmroDihLco8QvFdu6oTpK7Jnf-PdZaP90ZOTwkZA9Om5_oa98kpjHxYCDBmr8yEcu6sjYPx-Pn94oiQ7ejLwNfXSO_aZUK-x002b9d289LAnRfECljU4BYj8GfLEuAV-Cqu6Xu4mOtMBqGTQHfqqfTbyP7tU74mej2JSFAfz8Kc7SBtPthgr0RhsDqTl3_6kB4U52q5qA13VtxeV_bfK6pvAnNw7HXznqKEfkal3YnmDM5SsW2eFQgcmrLd_PymLvgahxp7iaUzAc8sQ5ybScUdkXspxZt4-9TRDyT0-BlwMs32fkFHQWK7a-VV7PGhNBnlX-Aq8Oua0vqYgogoVhwfk1ki2PGObzeSBOf4GFrSTeDfDV7phwUDwJxadu1l7OtNmPbkmgYd7GVM6LI-OBxiqlvk6KawLFnuKnVx8ptcWH2u5UdyBok-TdVOJKgyy_lqyxit0SY1I-Z1hUBuRFgTWwYA8ACy1aXJuJObjqoSpGlSfjAANbbiyQ0duI31KrLnxTw6m8KT5sVsS2mKnE2pKcV8CiqJfR1uHuCS1nGYL4VCQJP_i-7_jXBdxHP6QVYZwFrLAabp0vtGPCmrTL3_kTx4-a9EBrNgeEedMbaQ9uspQfAkyVBTssSZwaJqeWfFmg15zzbzBewF2gf8BIR1in7y36UnXV7Ol5-lqYefOFS0J5ev06kVcu_bW6eJjUlyEtO20KeM-HNLbPxgNxOvT_8EwGmVwV5QESu6-LXdpB1h3JRPIInJAKpNLEk8GQKvVtSgHVO2ow_OKfLsu0bcdR-fk_nG_MqoTK6uyNMw0V_FXdzBipkC5YPJoltD_VOz88xN-Q84FR4XlFVwSxo73M1BaXB-vva7BG3qmFG8QgIVPJ8mzEZC2qVBJwt2ek8Dy10aQeJLHIISk0mD30TGc7I3rFJ-ZK9Uml1WKawQO9DzMRfgg7iWmES-QqyQMEFwNqT8XhMyN6D4-CXofxTJB1z205SXnlF4p1v2AKdJaWYtUunioSOavAH3bxIUyRvhYPnyyz_XGDUl9BBrB9WZUPJK-x6rp7BV4mt_g27e6xTgzpqlfwsC0gTlMskTbtPSJGSerezJcxeU1ZihPiYd4T_3BqhGwtbMTOPDHZKVnukKV2Q3hgTdofuM8_b1Ar2kplBRG_seH60kLznPg9lRH6mUQ-RmHEB5FclFQ69nwMwNFtGHWnWHDlAb_Aj5UOnmEann6Mu0wb2jpalmnqZm2QXnk-OmI8XJVrGzOXMU7eMmsfTy5OC8JCAaWzAdochL-Nh9AN-sgqF2490UqFJDfMnUKY6UDiXxwEsAmqzI-IHTV5Ot_nk0igoTUXHWFk3lm6ANOKZklSeTNbm4PhkDY59G9LLXxJG55eqZfnvxxuowlVfdO7E81Wo-yWNLx5R9zWZMS6d6d9pjcT404Njukx-rYbDiCeama0kM8OiAvpGf5pGW0QqxIRpaoFRNiMHZ0LcztJ5ZKNCdi9e-APTYp_M2GghDylvyShjf7JPCq-tc0inW087ZMd1NX6cfZ218lLMNvqqyJKiTttdptUXMVO-qR9tPF6lOirpXW-fA02waGGnCN7tgvlZRltKfvcQ93QH4QtPfhkgJmO2vlti38sk6qTldBjrPTlnYHPuHQutjyd-Mn_j26bcBaVnFiV_6QgUyED6068ECWw9qBnLA44W8hxRhl0iZ6DrZtI67Kh_bWH-W8TMEY-FT9WuyZvfdrpAEFinxgU0IVrO5FrPQjqcJHU2FgcbT5jV5yEGXQv3XahjE5oppcCDnFVULyzzudpIPM2foRrl1goX3jNXZG9ZWFYOllgM6su7M8LGo9c7RlvK05Hb188VEkKeTwe-4_8km_R3Raln3kQbp4glSt-ZdUvxYzHBbzkneEcHzGrll-sTjfInLyAPPsOhZLIYArlpb2eBx1KC3bzsn5p3JFwbcu64HHZe1EDRcWSsfqsH6PqshyL7EX9TTxg4CN_5XfMWpRF1pZf6W6WVUy_da4N3g8AR7ReMT_uzHxkMw5JDPDU4SgueY811Ez3pb4KYdoz542uO98mBaT7i-VqtOJtNvlfhepQe2e5kaa9lDl1__UR7RpyjpdFfaauoVpotNUdz06e25HhCxzmNM3CausNZokvb5lF-V82B9uMOKtbk0G1D3Oc--EmaQZSdGn9aw9potqaPD5PYG-Uh6OUXRhMzrUXOdkq2M7QAxHLpKgZXTBw80BGjwDMrKL2SA-g68mnbR3s8BzOf47wlQ7F3PtY9vnyDGDosXxMGkBi4i0HWKI54jfphOV6iOnU9MMu2RHrL7xLQ4Q0xTRQJ3ioEqqyEmCA0uBTwi8ZToJTex4xujjTU24oMSHAWapk0CRrijYjG29mPT3lRsimSzp0iHCz_h6fjJWx89CUe1EDOTaPYD4pVl4XjaVjEWLiHgbQpHwrTzg4Mpv5eiibsKfxGXHMRF-vYk7zFLbaWtfE7iTdPkk-ELr8GlWd5MS7Cg73glPU0-PujH613goSxE68hYEsyOVj8ed14cMWz97FL7IiJZ84dqgFg3rzhDX3iqPu9yDWnsiCMB_R3gtBbUG9Oir4u6Pm5Zob4jly1eEBvCtB1sQKbFOJ-dXNASbC_E0yRelAD7NUnOxjEY7pmuSBvW3t3WTdCVZLNN10oEDXjvbX30SfIyZgsjdihKFGOpeXeD-JSaLKyqhc_FPrBWInzXebvmdqwbqb5szPym6vIwYQs4_vuhA9LFZ--Owab6P69idp5mNyQYBkdEQJeQ2e0_fwxdUy9OXv4mY4zgV2as43XayzA4XsqhCHx4SgoZMTJksClVIbihmEWz4YX9XyV_atmOUPkRVQ5Y7MKezKjNuqzBiga84vsPS2blII-RH0ZdV60K1st6kJY6F_8fKnGu9_F3YJAoDXC0K3SPZnVu5FHeek4AG_EiZYeG7dEalFoTRQwotez6alBUDgJKcbVNZdlKN5PGCfkh4u6R4cKn1nlUyI0Ikl2uEpSHy93pqki8tJpEB9rywbUkATIoJUfE\u003d&quot;,&quot;signature&quot;:&quot;rs_689c839c74d8819c9c36d3a6c33873c307c92f9cac383ee0&quot;},{&quot;type&quot;:&quot;text&quot;,&quot;text&quot;:&quot;Building the library to ensure the changes compile and there are no unresolved references.&quot;}],&quot;tool_calls&quot;:[{&quot;id&quot;:&quot;call_2rls6oLXTuMVKBiacsP2mxYC&quot;,&quot;type&quot;:&quot;function&quot;,&quot;function&quot;:{&quot;name&quot;:&quot;run_terminal_cmd&quot;,&quot;arguments&quot;:&quot;{\&quot;command\&quot;:\&quot;./gradlew :firebasevisionlib:assembleDebug --no-daemon --stacktrace\&quot;,\&quot;explanation\&quot;:\&quot;Compile the library module to validate the code changes and catch any compile-time issues.\&quot;}&quot;}}]},{&quot;role&quot;:&quot;tool&quot;,&quot;name&quot;:&quot;run_terminal_cmd&quot;,&quot;tool_call_id&quot;:&quot;call_2rls6oLXTuMVKBiacsP2mxYC&quot;,&quot;content&quot;:&quot;Command output:\n\n```\n\n```\n\nThe previous shell command ended, so on the next invocation of this tool, you will be reusing the shell.\n\nOn the next terminal tool call, the directory of the shell will already be /Users/simon/StudioProjects/firebasevision.&quot;},{&quot;role&quot;:&quot;assistant&quot;,&quot;content&quot;:[{&quot;type&quot;:&quot;thinking&quot;,&quot;thinking&quot;:&quot;gAAAAABonIO0Qtqpt8Wcw5tdBksmx8lX4z0iQ_ZBFR_dGcQcI0_i-B2mt1mXz5oVn0fQdj6dOYfZZUUHZWfT69NOX7DC46OR5CEDmFc8Bz0dTUsPEw62y9D7rA93syYVQVOcLH2DQKZkq0244nIalUmGfwMIsRPuOQ6M66wrkXkCc-Q_85jddC3yK4E-fIuTk5NrC0FqafW1YctrGPvaVGVloyGVC_FrU_RxHSNLpWmPxp9HlCtaWIku1v3bYTpzlj4j-Vo38A6j8sWAko9raSx6Kc_jsZ4oe9cleYgXwTb3thSpZtO9mS41DsarBKTwinKeEX4TB8wd5c3bH9mBmGGEtydDNIh-B0hWwHzTbOc1M2UoaCic-xife5RFjCT6ISAnMeFkErpzK1faz7em450GIkNuzF7QDMxAN9roajbBshgpcX4D2CCOnExCn0HIYl5-oxN9LnjhTKTnHuLV9VIzkNNwyAU01azlVjX617dk-HZfuJ5qdLH3ItnaH4-bN8vi7TQzdQX5sr88LldxG78ma5aD0UYEUBAvu-1yMqxtdhX_j18QGMGA1RMntbxJ6fTcM_HgkiIQKEaPHyK1K7TPnvXeh4RHOW0UuTlkHR8O2wysByJt45zNnr6oMVzjVFzmzy6fXogm7JHnvJeAX1EP0uT4SnKhyZZqaT9l1ikKj1QoEYAI_bIDSRxlDhEoPxrk8KEZVeTAXD2Aq4Wj2fSM_N9Hli2sicGG0u_mP4Z6VmmjBdtCd9Z25xIl2Zff1fUwuxtbk5yPTbMac79OgCJlSKda-Wa1XMVV_U0QEh80WydSffB7t8MMeZUhcGDoVaLgRiCRtJV7PO6blq2vlbJ_YvR80LwVu7bDI1hj-pwzcaOpEfibbBSFK_Uu4Qg_7Zfw1hbGnSbr9LeRFRTtsUgdmoulqMiyZOG7TxWehTUOHRr42UnYk1P_cTpev5DSGezRLJMv9XXgv-W9ZstRL2zokdWrkmFkJY9GSvQOrqccIiGf8mVQsaj7nZqfWgwHXNBdtPauz-S95O6zMDKdBzjnbuV1ocdImMXS_VwYMpB5aKVz_xlp4Y2pauVzU50LQ0AqdA0BUsl4FfalPD4-6g1vlYlrL0y9nyvJxJLjgN_0ZYqqPlx4olXUd5lspBeWtBNSQ3dp5-uAJUnDMfbsCI64arK95Ta2m4FSGxO_eOXChensBARg0bwpTq12YfVjQzgH197tkizNHwSTBRD9VN2Nx6xrV7vtVwf4JFnxD_YdP1nG-3w95T5bXzaZJJlKOp3mrGs7hi6Xo_eabMQBCR0dkBP_smAdsApnPTmWBjum2yomNA8pr_SQ8lY4gSo1POXe1TBfbUZoodbqZVUb_KaBGLiiJa25eWbaCSwu-q3-36gFSkoekvnshCvyfgxQ4xtAHPNptpVSp1lYHoPnglXCan0KjmmfO8vfFXGM9jT7xczpSeRlwL7npFbsjBX7-mLD-1CD9ZIDW6l-bYQtKK0p2HyJmjwsAwJ7FWae_hcIHZ966ZgMAhKtsofGHKmIU287WWXendTY2P_DpualdUYtocivMVu1uj_4z4VIIKLgvijK5TiRsAUqueuCTbDfT14ajbUPSSbLq1We4e8Ph1cijLcdKHNqfCLbd5EVJ_R91BkiVMJgBwjLMJnme6A-4N_EW2AmWbVxCuhY5WuY4VlPiJRQTBPI2bdsGcVGvJVk6sRV6YOfhDlWz4JF6XNH5ffbFymfpKV88VgeYpYTTNtPvKtmltw1FPCxB-BC0dh3kWQAVqyBn3lGsup9uVHKdF0MiisrGeE95Iw-Xb6IXoI6S0RBJPCcXghHxpvXitLMq4n1ukFWvgQ1F36kaIfJIojc0cmueeqnw8Y-WTAGzOKjPBj8BmBpUotqvyy973Fv2M8HDgfAmGgWaCxleXuFjEvEmFJtwcjizhXQ5QlV8tTDR-myk2CkQC9Mj-PX-OrPthKEtvnm6pGD1zY-9wt3eCe-EJqePh1djV-Fela6a-uiy6t4dqdYyrRRh42QM1tx0xhG037-Wo5toKmsexXSczPNAPTPjsidhnAzR0xHo3bAcGbEJTbFMeSbpSuLcy7d5flW580NaTgitXu4biSKpe5O79Rpd7RaZcvqyVRmGjhtr1urfUNJInTlTTcJS-s82jVdO1mhSeLFNb_Wxk-EULiYQZgJE75l-JwYOvAEpe3Y6IzzKEGG_DJHfzxWirH66hBy8-lQp4ZansGplcE4_6yXRGAJsd9oCp8uTanlAaP3_W-TWI6c-KgYZ8hhamyR1GKO0ekaEGoS_tgy_BTaaSVJIjGT2prNqJwnKkib5zB8vw7kaY5Udh-Eh19QmysOCo8GFyiUW4wrY-QyenvyGz3-M_PMkIt5NX5jV_Iyq93MtCg2e5jlpGKamA4VQ_C9RXICidBEAr5FaXU5WHwZZKG8m1qSpd07iHd3kscjkcBzpw_Jvw0oGCrCCnUFYMo6oNHq6Lp4AhytS2w8NnwOM9P9TeZMUXENFzKuUrM6ffBW8RuWPdal286uaEFKKtx0-nSF0cBtj0Z_iSIqilGyRbFt6DPjP-ewc5QYAORu0fNCn6vSAA3SvUKjgRL7LFnoLGzNXHIOem72EiEjE_1oTOyUvo5QHnVRIIta612rkHm6Zd6BFf8WmQNvxLMPLBvZ9VEc_aFtWVnRJI5mjNKljC4nrvM14dEG&quot;,&quot;signature&quot;:&quot;rs_689c83afd1a8819c89d379d0a7bb4bf307c92f9cac383ee0&quot;},{&quot;type&quot;:&quot;text&quot;,&quot;text&quot;:&quot;### Done\n- Replaced TedPermission with native runtime permission handling using the Activity Result API.\n- Camera permission is now checked via ContextCompat and requested via `registerForActivityResult` on the `owner` if it’s a `Fragment` or `ComponentActivity`.\n- On grant: continues startup; on denial: finishes the `Activity` or pops the `Fragment` back stack (same behavior as before).\n- Removed unresolved references and fixed the linter errors.\n\nNotes:\n- Ensure `owner` is a `Fragment` or an `AppCompatActivity` (which extends `ComponentActivity`) so the permission launcher can be registered.\n- `rationaleString` and `deniedString` are no longer used; if you want to show custom UI for rationale/denied, we can add a small dialog before launching the request or after denial.\n\n- Updated `firebasevisionlib/src/main/java/dk/makeable/firebasevisionlib/FirebaseVisionSetup.kt` to use native permission requests and cleaned up the old code.&quot;}]}]}" />
      </map>
    </option>
  </component>
</project>